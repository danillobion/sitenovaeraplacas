import{C as b,r as w,o as y,c as i,a as n,b as l,u as d,m as k,w as c,d as a,e as V,f as C,F as u,h as E,n as N,g as $}from"./app-Deznpkus.js";import{_ as P}from"./AuthenticatedLayout-B_hN4s5H.js";import{_ as p,a as g,b as U}from"./TextInput-C0ihfeu5.js";import{P as j}from"./PrimaryButton-CVYCmnFC.js";import"./ApplicationLogo-6UCaLr-C.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const B={class:"py-1"},F={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},I={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg dark:bg-gray-800"},D={class:"p-6 text-gray-900 dark:text-gray-100"},L=["src"],M={class:"mt-4 grid md:grid-cols-2 md:gap-6"},O={class:"mt-4"},R={class:"mt-4 flex items-center justify-end"},H={__name:"edit",props:{produto:Object},setup(f){const t=f,e=b({id:null,nome:"",descricao:"",valor:"",imagem:null}),m=w(null),v=[{id:"nome",label:"Nome",model:"nome"},{id:"descricao",label:"Descrição",model:"descricao"},{id:"valor",label:"Valor",model:"valor"}],_=()=>{const s=new FormData;e.id!=null&&s.append("id",t.produto.id),s.append("nome",e.nome),s.append("descricao",e.descricao),s.append("valor",e.valor),e.imagem?s.append("imagem",e.imagem):console.warn("Nenhuma imagem foi selecionada."),axios.post(route("produto.salvar"),s,{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{alert("Produto salvo com sucesso!"),window.location.href=route("produtos.index")}).catch(o=>{console.error("Erro ao salvar produto:",o),alert("Erro ao salvar produto.")})},h=s=>{const o=s.target.files[0];o&&(e.imagem=o,m.value=URL.createObjectURL(o))};return y(()=>{t.produto&&(e.id=t.produto.id,e.nome=t.produto.nome,e.descricao=t.produto.descricao,e.valor=t.produto.valor,e.imagem=t.produto.imagem),t.produto.imagem&&(m.value=`/${t.produto.imagem}`)}),(s,o)=>(n(),i(u,null,[l(d(k),{title:"Editar"}),l(P,null,{header:c(()=>o[0]||(o[0]=[a("h2",{class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200"},"Editar produto",-1)])),default:c(()=>[a("div",B,[a("div",F,[a("div",I,[a("div",D,[a("form",{onSubmit:V(_,["prevent"]),enctype:"multipart/form-data"},[o[3]||(o[3]=a("h2",{class:"mb-4 text-lg"},"Informações",-1)),m.value?(n(),i("img",{key:0,src:m.value||`/${d(e).imagem}`,alt:"Imagem do Produto",class:"mt-4 w-40 h-40 object-cover rounded-lg shadow-md"},null,8,L)):C("",!0),a("div",M,[a("div",O,[l(p,{for:"imagem",value:"Imagem da Estampadora"}),a("input",{id:"imagem",type:"file",class:"mt-1 block w-full",onChange:h,accept:"image/*"},null,32),l(g,{class:"mt-2",message:d(e).errors.imagem},null,8,["message"])]),o[1]||(o[1]=a("div",null,null,-1)),(n(),i(u,null,E(v,r=>a("div",{key:r.id},[l(p,{for:r.id,value:r.label},null,8,["for","value"]),l(U,{id:r.id,type:"text",class:"mt-1 block w-full",modelValue:d(e)[r.model],"onUpdate:modelValue":x=>d(e)[r.model]=x,required:"",autocomplete:r.id},null,8,["id","modelValue","onUpdate:modelValue","autocomplete"]),l(g,{class:"mt-2",message:d(e).errors[r.model]},null,8,["message"])])),64))]),a("div",R,[l(j,{class:N(["ms-4",{"opacity-25":d(e).processing}]),disabled:d(e).processing},{default:c(()=>o[2]||(o[2]=[$(" Salvar ")])),_:1},8,["class","disabled"])])],32)])])])])]),_:1})],64))}};export{H as default};
