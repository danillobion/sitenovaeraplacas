import{C as $,r as N,o as U,c,a as p,b as l,u as r,m as D,w as m,d as a,e as g,f as L,g as f,F as h,h as J,i as q,v as I,n as T,j as v}from"./app-CQ8fvtRL.js";import{_ as B}from"./AuthenticatedLayout-C8jy4Lfa.js";import{_ as d,a as n,b as i}from"./TextInput-D4qZsCrL.js";import{P as b}from"./PrimaryButton-CH4ov8dt.js";import"./ApplicationLogo-8pQWkNgu.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"py-1"},z={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},O={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg dark:bg-gray-800"},M={class:"p-6 text-gray-900 dark:text-gray-100"},R=["src"],S={class:"grid md:grid-cols-2 md:gap-6"},H={class:"mt-4"},A={class:"flex items-center space-x-2"},G={class:"w-full"},K={class:"mt-4 grid md:grid-cols-2 md:gap-6"},Q={class:"flex items-center space-x-2"},W={class:"w-full"},X={class:"mt-4 grid md:grid-cols-2 md:gap-6"},Y={class:"mt-4 grid md:grid-cols-2 md:gap-6"},Z={class:"mt-4 flex items-center justify-end"},se={__name:"edit",props:{estampadora:Object,endereco:Object},setup(_){const w=_,o=$({id:null,nome:"",telefone:"",horario_funcionamento:"",cnpj:"",cep:"",uf:"",cidade:"",bairro:"",logradouro:"",numero:"",complemento:"",latitude:0,longitude:0,imagem:null}),u=N(null),y=[{id:"cep",label:"CEP",model:"cep"},{id:"uf",label:"UF",model:"uf"},{id:"cidade",label:"Cidade",model:"cidade"},{id:"bairro",label:"Bairro",model:"bairro"},{id:"logradouro",label:"Logradouro",model:"logradouro"},{id:"numero",label:"Número",model:"numero"},{id:"complemento",label:"Complemento",model:"complemento"},{id:"latitude",label:"Latitude",model:"latitude"},{id:"longitude",label:"Longitude",model:"longitude"}],C=()=>{const t=new FormData;Object.keys(o).forEach(e=>{o[e]!==null&&t.append(e,o[e])}),v.post(route("estampadora.salvar"),t,{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{alert("Estampadora salva com sucesso!"),window.location.href=route("estampadora.index"),o.reset()}).catch(e=>{console.error(e),alert("Erro ao salvar estampadora.")})},j=async()=>{const t=o.cep.replace(/\D/g,"");if(t.length!==8){alert("CEP inválido! Digite um CEP com 8 dígitos.");return}try{const e=await v.get(route("endereco.cep",t));if(e.data.error){alert(e.data.error);return}o.cep=e.data.cep,o.uf=e.data.uf,o.cidade=e.data.cidade,o.bairro=e.data.bairro,o.logradouro=e.data.logradouro,o.complemento=e.data.complemento||""}catch(e){alert("Erro ao buscar o CEP. Tente novamente."),console.error(e)}},V=async()=>{const t=o.cnpj.replace(/\D/g,"");if(t.length!==14){alert("CNPJ inválido! Digite um CNPJ com 14 dígitos.");return}try{const e=await v.get(route("consultar.cnpj",t));if(e.data.error){alert(e.data.error);return}o.nome=e.data.nome,o.telefone=e.data.telefone1,o.cep=e.data.cep,o.uf=e.data.uf,o.cidade=e.data.cidade,o.bairro=e.data.bairro,o.logradouro=e.data.logradouro,o.numero=e.data.numero,o.complemento=e.data.complemento||""}catch(e){alert("Erro ao buscar o CNPJ. Tente novamente."),console.error(e)}},k=t=>t.replace(/\D/g,"").replace(/^(\d{2})(\d)/,"$1.$2").replace(/^(\d{2})\.(\d{3})(\d)/,"$1.$2.$3").replace(/\.(\d{3})(\d)/,".$1/$2").replace(/(\d{4})(\d)/,"$1-$2").slice(0,18),x=t=>{o.cnpj=k(t.target.value)},E=t=>{const e=t.target.files[0];e&&(o.imagem=e,u.value=URL.createObjectURL(e))};return U(()=>{const{estampadora:t,endereco:e}=w;t.imagem&&(u.value=`/${t.imagem}`),o.id=t.id==null?null:t.id,o.nome=t.nome,o.cnpj=t.cnpj,o.telefone=t.telefone,o.horario_funcionamento=t.horario_funcionamento,o.imagem=t.imagem,o.cep=e.cep,o.uf=e.uf,o.cidade=e.cidade,o.bairro=e.bairro,o.logradouro=e.logradouro,o.numero=e.numero,o.complemento=e.complemento,o.latitude=e.latitude,o.longitude=e.longitude,x({target:{value:o.cnpj}})}),(t,e)=>(p(),c(h,null,[l(r(D),{title:"Editar"}),l(B,null,{header:m(()=>e[5]||(e[5]=[a("h2",{class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200"},"Editar estampadora",-1)])),default:m(()=>[a("div",F,[a("div",z,[a("div",O,[a("div",M,[a("form",{onSubmit:g(C,["prevent"]),enctype:"multipart/form-data"},[e[10]||(e[10]=a("h2",{class:"mb-4 text-lg"},"Informações",-1)),u.value?(p(),c("img",{key:0,src:u.value||`/${r(o).imagem}`,alt:"Imagem da Estampadora",class:"mt-4 w-40 h-40 object-cover rounded-lg shadow-md"},null,8,R)):L("",!0),a("div",S,[a("div",H,[l(d,{for:"imagem",value:"Imagem da Estampadora"}),a("input",{id:"imagem",type:"file",class:"mt-1 block w-full",onChange:E,accept:"image/*"},null,32),l(n,{class:"mt-2",message:r(o).errors.imagem},null,8,["message"])]),e[7]||(e[7]=a("div",null,null,-1)),a("div",A,[a("div",G,[l(d,{for:"cnpj",value:"CNPJ"}),l(i,{id:"cnpj",type:"text",class:"mt-1 block w-full",modelValue:r(o).cnpj,"onUpdate:modelValue":e[0]||(e[0]=s=>r(o).cnpj=s),required:"",autocomplete:"cnpj",onInput:x},null,8,["modelValue"]),l(n,{class:"mt-2",message:r(o).errors.cnpj},null,8,["message"])]),l(b,{onClick:g(V,["prevent"]),class:"mt-6"},{default:m(()=>e[6]||(e[6]=[f(" Localizar ")])),_:1})]),a("div",null,[l(d,{for:"nome",value:"Razão social"}),l(i,{id:"nome",type:"text",class:"mt-1 block w-full",modelValue:r(o).nome,"onUpdate:modelValue":e[1]||(e[1]=s=>r(o).nome=s),required:"",autofocus:"",autocomplete:"name"},null,8,["modelValue"]),l(n,{class:"mt-2",message:r(o).errors.nome},null,8,["message"])])]),e[11]||(e[11]=a("h2",{class:"mt-4 text-lg"},"Endereço",-1)),a("div",K,[a("div",Q,[a("div",W,[l(d,{for:"cep",value:"CEP"}),l(i,{id:"cep",type:"text",class:"mt-1 block w-full",modelValue:r(o).cep,"onUpdate:modelValue":e[2]||(e[2]=s=>r(o).cep=s),required:"",autocomplete:"cep"},null,8,["modelValue"]),l(n,{class:"mt-2",message:r(o).errors.cep},null,8,["message"])]),l(b,{onClick:g(j,["prevent"]),class:"mt-6"},{default:m(()=>e[8]||(e[8]=[f(" Localizar ")])),_:1})]),(p(!0),c(h,null,J(y.slice(1),s=>(p(),c("div",{key:s.id},[l(d,{for:s.id,value:s.label},null,8,["for","value"]),l(i,{id:s.id,type:"text",class:"mt-1 block w-full",modelValue:r(o)[s.model],"onUpdate:modelValue":P=>r(o)[s.model]=P,required:"",autocomplete:s.id},null,8,["id","modelValue","onUpdate:modelValue","autocomplete"]),l(n,{class:"mt-2",message:r(o).errors[s.model]},null,8,["message"])]))),128))]),e[12]||(e[12]=a("h2",{class:"mt-4 text-lg"},"Contato",-1)),a("div",X,[a("div",null,[l(d,{for:"telefone",value:"Telefone"}),l(i,{id:"telefone",type:"text",class:"mt-1 block w-full",modelValue:r(o).telefone,"onUpdate:modelValue":e[3]||(e[3]=s=>r(o).telefone=s),required:"",autofocus:"",autocomplete:"telefone"},null,8,["modelValue"]),l(n,{class:"mt-2",message:r(o).errors.telefone},null,8,["message"])])]),e[13]||(e[13]=a("h2",{class:"mt-4 text-lg"},"Horários",-1)),a("div",Y,[a("div",null,[l(d,{for:"horario_funcionamento",value:"Horário de funcionamento"}),q(a("textarea",{id:"horario_funcionamento",type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-indigo-600 dark:focus:ring-indigo-600",rows:"3","onUpdate:modelValue":e[4]||(e[4]=s=>r(o).horario_funcionamento=s),required:"",autofocus:"",autocomplete:"horario_funcionamento",placeholder:"Digite o horario de funcionamento. Exemplo: Segunda a sexta das 8h às 18h e sábado das 8h às 12h"},null,512),[[I,r(o).horario_funcionamento]]),l(n,{class:"mt-2",message:r(o).errors.horario_funcionamento},null,8,["message"])])]),a("div",Z,[l(b,{class:T(["ms-4",{"opacity-25":r(o).processing}]),disabled:r(o).processing},{default:m(()=>e[9]||(e[9]=[f(" Salvar ")])),_:1},8,["class","disabled"])])],32)])])])])]),_:1})],64))}};export{se as default};
